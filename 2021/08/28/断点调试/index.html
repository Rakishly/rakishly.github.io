<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>断点调试 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="环境说明宿主机deepin系统，用的是docker-compose 搭建laravel php.ini 添加 xdebug 模块   下载xdebug模块   首先打印phpinfo() 全选复制到 https:&#x2F;&#x2F;xdebug.org&#x2F;wizard 这个链接的文本域中 并且点击这个按钮生成  点击下载  注：由于我之前下载2.7.1版本的，并且适用php 7.1，固这里不下载2.9  解压并进入">
<meta property="og:type" content="article">
<meta property="og:title" content="断点调试">
<meta property="og:url" content="http://example.com/2021/08/28/%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="环境说明宿主机deepin系统，用的是docker-compose 搭建laravel php.ini 添加 xdebug 模块   下载xdebug模块   首先打印phpinfo() 全选复制到 https:&#x2F;&#x2F;xdebug.org&#x2F;wizard 这个链接的文本域中 并且点击这个按钮生成  点击下载  注：由于我之前下载2.7.1版本的，并且适用php 7.1，固这里不下载2.9  解压并进入">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/YLQUtpK94R.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/WAtCbkijq7.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/yTd3hTTIV1.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/RGOhxponSN.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/unnb6VaLko.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/c02kNEe9ab.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/Fncjm9wMX6.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/1WEvAQYL8y.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/Kxt1y59lb3.png!large">
<meta property="og:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/vrfB90sabr.png!large">
<meta property="article:published_time" content="2021-08-28T08:29:15.000Z">
<meta property="article:modified_time" content="2021-08-28T08:30:58.237Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.learnku.com/uploads/images/202001/09/26659/YLQUtpK94R.png!large">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-断点调试" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/08/28/%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/" class="article-date">
  <time class="dt-published" datetime="2021-08-28T08:29:15.000Z" itemprop="datePublished">2021-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      断点调试
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a><a href="#%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E" title="环境说明"></a>环境说明</h2><p>宿主机deepin系统，用的是docker-compose 搭建laravel</p>
<h2 id="php-ini-添加-xdebug-模块"><a href="#php-ini-添加-xdebug-模块" class="headerlink" title="php.ini 添加 xdebug 模块"></a><a href="#php-ini-%E6%B7%BB%E5%8A%A0-xdebug-%E6%A8%A1%E5%9D%97" title="php.ini 添加 xdebug 模块"></a>php.ini 添加 xdebug 模块</h2><ul>
<li>  下载xdebug模块</li>
<li>  首先打印phpinfo() 全选复制到 <a href="http://">https://xdebug.org/wizard</a> 这个链接的文本域中 并且点击这个按钮生成<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/YLQUtpK94R.png!large" alt="phpstrom + docker + xdebug 断点调试"></li>
</ul>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/WAtCbkijq7.png!large" alt="phpstrom + docker + xdebug 断点调试"><br>点击下载</p>
<blockquote>
<p>注：由于我之前下载2.7.1版本的，并且适用php 7.1，固这里不下载2.9</p>
</blockquote>
<p>解压并进入xdebug目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">tar -xvzf xdebug-2.9.0.tgz</span>
<span class="line">cd xdebug-2.9.0</span>
</pre></td></tr></table></figure>

<p>编译并生成.so文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
</pre></td><td class="code"><pre><span class="line">phpize # 生成configure文件</span>
<span class="line">.&#x2F;configure --enable-xdebug # 配置</span>
<span class="line">make &amp;&amp; make install # 编译并生成</span>
</pre></td></tr></table></figure>

<p>复制 xdebug.so模块到指定目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
</pre></td><td class="code"><pre><span class="line">cd modules&#x2F; </span>
<span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules </span>
<span class="line">cp xdebug.so &#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules</span>
</pre></td></tr></table></figure>

<p>找到 <strong>php.ini</strong> 文件 在最后插入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
<span class="line">3</span>
<span class="line">4</span>
<span class="line">5</span>
<span class="line">6</span>
<span class="line">7</span>
<span class="line">8</span>
<span class="line">9</span>
<span class="line">10</span>
<span class="line">11</span>
<span class="line">12</span>
<span class="line">13</span>
<span class="line">14</span>
</pre></td><td class="code"><pre><span class="line">[xdebug]</span>
<span class="line">zend_extension&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;modules&#x2F;xdebug.so</span>
<span class="line">xdebug.profiler_enable&#x3D;on #开启性能监控（一般在正式环境不建议开启）</span>
<span class="line">xdebug.trace_output_dir&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug_trace&quot; #程序执行顺序日志</span>
<span class="line">xdebug.profiler_output_dir&#x3D;&quot;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug_profiler&quot; #程序执行性能日志</span>
<span class="line">xdebug.default_enable&#x3D;0</span>
<span class="line">xdebug.remote_enable&#x3D;1</span>
<span class="line">xdebug.remote_handler&#x3D;dbgp</span>
<span class="line">xdebug.remote_host&#x3D;192.168.5.24</span>
<span class="line">xdebug.remote_port&#x3D;9000</span>
<span class="line">xdebug.remote_connect_back&#x3D;0</span>
<span class="line">xdebug.remote_autostart&#x3D;1</span>
<span class="line">xdebug.idekey&#x3D;PHPSTORM</span>
<span class="line">xdebug.remote_log&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;xdebug&#x2F;remote.log</span>
</pre></td></tr></table></figure>
> zend_extension 这个值就是xdebug.so的目录，xdebug.remote_host是电脑ip，xdebug.idekey 这个值要跟phpstrom编辑器设置的一致

<p><strong>重启 php</strong> 打印 **phpinfo()**，如果有下图，表示成功</p>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/yTd3hTTIV1.png!large" alt="phpstorm + xdebug 断点调试"></p>
<p>因为我用的是docker 刚开始没有 php.ini 文件<br><code>find / -name php.ini*</code></p>
<p><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/RGOhxponSN.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>进入/usr/local/etc/php，并且根据 <strong>php.ini-development</strong> 复制一份 <strong>php.ini</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span>
<span class="line">2</span>
</pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php</span>
<span class="line">mv php.ini-development php.ini</span>
</pre></td></tr></table></figure>

<h2 id="接下来配置phpstorm"><a href="#接下来配置phpstorm" class="headerlink" title="接下来配置phpstorm"></a><a href="#%E6%8E%A5%E4%B8%8B%E6%9D%A5%E9%85%8D%E7%BD%AEphpstorm" title="接下来配置phpstorm"></a>接下来配置phpstorm</h2><p><code>|file|settings</code><br>这里的 <strong>debug port</strong> 要跟上面 php.ini 里面 <strong>xdebug.remote_port</strong> 的值一致<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/unnb6VaLko.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置DBGp Proxy，这里IDE key 要跟下面浏览器debug配置的key一致<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/c02kNEe9ab.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置servers，这里的host，本地项目一般填localhost，端口要跟服务器配置的一致，我的是宿主机81端口映射到docker容器 80端口，所以填81，<strong>Debugger</strong> 这里选择 <strong>Xdebug</strong> ，下面的File/Directory配置的是宿主机php项目所在目录，而absolute path on the server配置的是Docker容器中的项目目录<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/Fncjm9wMX6.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>配置 <code>|Run|Debug Configurations</code><br>添加一个<code>PHP Web Page</code><br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/1WEvAQYL8y.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<h2 id="谷歌浏览器安装xdebug-helper-插件"><a href="#谷歌浏览器安装xdebug-helper-插件" class="headerlink" title="谷歌浏览器安装xdebug helper 插件"></a><a href="#%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E8%A3%85xdebug-helper-%E6%8F%92%E4%BB%B6" title="谷歌浏览器安装xdebug helper 插件"></a>谷歌浏览器安装<code>xdebug helper</code> 插件</h2><p>安装完成后，右键选择”选项”，IDE key选择”PhpStorm”，后面输入”PHPSTORM”点击save按钮即可:<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/Kxt1y59lb3.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>
<p>点击右上角这个电话虫，设置断点，浏览器刷新，就可以进行断点调试<br><img src="https://cdn.learnku.com/uploads/images/202001/09/26659/vrfB90sabr.png!large" alt="phpstrom + docker + xdebug 断点调试"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/08/28/%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/" data-id="cksvm2b1k0001lot69fpo9mpm" data-title="断点调试" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/08/28/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/08/28/%E6%96%AD%E7%82%B9%E8%B0%83%E8%AF%95/">断点调试</a>
          </li>
        
          <li>
            <a href="/2021/08/28/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>